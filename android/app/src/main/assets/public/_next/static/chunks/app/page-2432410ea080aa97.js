(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{37152:(e,s,t)=>{Promise.resolve().then(t.bind(t,89727))},89727:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(74459),r=t(25803),i=t(10564),l=t(20316),n=t(24135),d=t(61417),c=t(87432),o=t(51553),m=t(8264),u=t(68817),x=t(94335);function g(e){let{children:s,className:t,tiltStrength:i=10,glareEnabled:l=!0}=e,n=(0,r.useRef)(null),[d,g]=(0,r.useState)(!1),h=(0,c.d)(0),b=(0,c.d)(0),p=(0,o.z)(h,{stiffness:300,damping:30}),v=(0,o.z)(b,{stiffness:300,damping:30}),j=(0,m.G)(v,[-.5,.5],[i,-i]),f=(0,m.G)(p,[-.5,.5],[-i,i]),N=(0,m.G)(p,[-.5,.5],["0%","100%"]),y=(0,m.G)(v,[-.5,.5],["0%","100%"]);return(0,a.jsxs)(u.P.div,{ref:n,onMouseMove:e=>{if(!n.current)return;let s=n.current.getBoundingClientRect(),t=s.width,a=s.height,r=e.clientX-s.left,i=e.clientY-s.top;h.set(r/t-.5),b.set(i/a-.5)},onMouseLeave:()=>{h.set(0),b.set(0),g(!1)},onMouseEnter:()=>{g(!0)},style:{rotateX:j,rotateY:f,transformStyle:"preserve-3d"},className:(0,x.cn)("relative",t),transition:{type:"spring",stiffness:300,damping:30},children:[(0,a.jsx)("div",{style:{transform:"translateZ(20px)"},className:"relative z-10",children:s}),l&&(0,a.jsx)(u.P.div,{className:"pointer-events-none absolute inset-0 rounded-inherit",style:{background:"radial-gradient(circle at ".concat(N," ").concat(y,", rgba(255, 255, 255, 0.1) 0%, transparent 50%)"),opacity:+!!d},transition:{duration:.3}})]})}var h=t(11881),b=t(12707),p=t(26701),v=t(11334);function j(e){let{onRefresh:s,enabled:t=!0}=e,{isPulling:i,isRefreshing:l,pullDistance:n,pullProgress:d}=function(e){let{onRefresh:s,threshold:t=80,resistance:a=2.5,enabled:i=!0}=e,[l,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(0),u=(0,r.useRef)(0),x=(0,r.useRef)(0),g=(0,r.useRef)(0),h=(0,r.useCallback)(e=>{i&&!d&&(g.current=window.scrollY,0===g.current&&(u.current=e.touches[0].clientY,n(!0)))},[i,d]),b=(0,r.useCallback)(e=>{if(!i||d||!l||g.current>0)return;x.current=e.touches[0].clientY;let s=Math.max(0,x.current-u.current);m(Math.min(s/a,1.5*t)),s>10&&e.preventDefault()},[i,d,l,a,t]),p=(0,r.useCallback)(async()=>{if(!i||d){n(!1),m(0);return}if(n(!1),o>=t){c(!0);try{await s()}catch(e){v.v.error("Pull to refresh failed:",e)}finally{c(!1),m(0)}}else m(0)},[i,d,o,t,s]);return(0,r.useEffect)(()=>{if(i)return document.addEventListener("touchstart",h,{passive:!0}),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",p,{passive:!0}),()=>{document.removeEventListener("touchstart",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",p)}},[i,h,b,p]),{isPulling:l,isRefreshing:d,pullDistance:o,pullProgress:Math.min(o/t,1)}}({onRefresh:s,threshold:80,enabled:t}),c=d>=1;return(0,a.jsx)(h.N,{children:(i||l)&&(0,a.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"pointer-events-none fixed left-0 right-0 top-0 z-50 flex justify-center",style:{transform:"translateY(".concat(Math.min(n,100),"px)")},children:(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-3 rounded-full bg-card/95 backdrop-blur-xl border border-border/50 px-6 py-3 shadow-depth-3",children:[(0,a.jsx)(u.P.div,{animate:{rotate:l?360:180*!!c,scale:c?1.1:1},transition:{rotate:{duration:l?1:.3,repeat:l?1/0:0,ease:"linear"},scale:{duration:.2}},children:l?(0,a.jsx)(b.A,{className:"h-5 w-5 text-primary"}):(0,a.jsx)(p.A,{className:"h-5 w-5 ".concat(c?"text-primary":"text-muted-foreground")})}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(c||l?"text-primary":"text-muted-foreground"),children:l?"Refreshing...":c?"Release to refresh":"Pull to refresh"}),!l&&(0,a.jsx)("div",{className:"h-1 w-12 overflow-hidden rounded-full bg-muted",children:(0,a.jsx)(u.P.div,{className:"h-full bg-primary",initial:{width:"0%"},animate:{width:"".concat(100*d,"%")},transition:{duration:.1}})})]})})})}var f=t(91901),N=t(44530),y=t(10304),w=t(89225),k=t(60101),C=t(1171),B=t(91357),S=t(36210),A=t(96481),D=t(63461),R=t(40233);function P(e){let{showDetails:s=!0}=e,{allBiases:t}=(0,R.n)(),[i,l]=(0,r.useState)({totalBiases:0,coreBiases:0,userBiases:0,categories:{},researchLevels:{},totalKnownBiases:180,coveragePercentage:0});(0,r.useEffect)(()=>{if(t.length>0){let e=t.filter(e=>"core"===e.source),s=t.filter(e=>"user"===e.source),a=t.reduce((e,s)=>(e[s.category]=(e[s.category]||0)+1,e),{}),r=t.reduce((e,s)=>{let t=s.researchLevel||"unknown";return e[t]=(e[t]||0)+1,e},{}),i=t.length/180*100;l({totalBiases:t.length,coreBiases:e.length,userBiases:s.length,categories:a,researchLevels:r,totalKnownBiases:180,coveragePercentage:i})}},[t]);let n=e=>{let s={social:"bg-blue-100 text-blue-800 border-blue-200",decision:"bg-green-100 text-green-800 border-green-200",memory:"bg-purple-100 text-purple-800 border-purple-200",perception:"bg-orange-100 text-orange-800 border-orange-200",misc:"bg-gray-100 text-gray-800 border-gray-200"};return s[e]||s.misc},d=e=>{let s={established:"bg-green-100 text-green-800 border-green-200",emerging:"bg-yellow-100 text-yellow-800 border-yellow-200",contested:"bg-red-100 text-red-800 border-red-200",unknown:"bg-gray-100 text-gray-800 border-gray-200"};return s[e]||s.unknown};return s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(S.Zp,{className:"border-l-4 border-l-blue-500",children:[(0,a.jsx)(S.aR,{children:(0,a.jsxs)(S.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-blue-600"}),"Content Coverage & Transparency"]})}),(0,a.jsxs)(S.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:i.totalBiases}),(0,a.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Total Biases"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:[i.coveragePercentage.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Coverage"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:["~",i.totalKnownBiases]}),(0,a.jsx)("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Known Biases"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Content Coverage"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.totalBiases," / ",i.totalKnownBiases]})]}),(0,a.jsx)(D.k,{value:i.coveragePercentage,className:"h-2"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:i.coreBiases}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Core Biases"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:i.userBiases}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"User Added"})]})]})]})]})]}),(0,a.jsxs)(S.Zp,{children:[(0,a.jsx)(S.aR,{children:(0,a.jsxs)(S.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"h-5 w-5 text-green-600"}),"Category Distribution"]})}),(0,a.jsx)(S.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(i.categories).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.E,{className:n(s),children:s.charAt(0).toUpperCase()+s.slice(1)}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t," bias",1!==t?"es":""]})]}),(0,a.jsx)("div",{className:"w-24",children:(0,a.jsx)(D.k,{value:t/i.totalBiases*100,className:"h-1"})})]},s)})})})]}),(0,a.jsxs)(S.Zp,{children:[(0,a.jsx)(S.aR,{children:(0,a.jsxs)(S.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"h-5 w-5 text-purple-600"}),"Research Quality"]})}),(0,a.jsx)(S.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(i.researchLevels).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.E,{className:d(s),children:s.charAt(0).toUpperCase()+s.slice(1)}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t," bias",1!==t?"es":""]})]}),(0,a.jsx)("div",{className:"w-24",children:(0,a.jsx)(D.k,{value:t/i.totalBiases*100,className:"h-1"})})]},s)})})})]}),(0,a.jsxs)(S.Zp,{children:[(0,a.jsx)(S.aR,{children:(0,a.jsxs)(S.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5 text-orange-600"}),"Update Schedule & Roadmap"]})}),(0,a.jsx)(S.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"font-medium text-green-900 dark:text-green-100",children:"Current Status"})]}),(0,a.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Daily bias rotation with ",i.totalBiases," biases means you'll see each bias approximately every ",Math.ceil(i.totalBiases/365)," year",1!==Math.ceil(i.totalBiases/365)?"s":"","."]})]}),(0,a.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Expansion Plan"})]}),(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"We're continuously adding new biases and improving existing content based on user feedback and expert review."})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 text-purple-600"}),(0,a.jsx)("span",{className:"font-medium text-purple-900 dark:text-purple-100",children:"Community Contributions"})]}),(0,a.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Users can add custom biases, and all content is reviewed for accuracy. We aim to reach 100+ biases through community contributions and expert curation."})]})]})})]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-blue-900 dark:text-blue-100",children:[i.totalBiases," of ~",i.totalKnownBiases," known biases"]}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[i.coveragePercentage.toFixed(1),"% coverage"]})]})]})}function E(){let{allBiases:e,progressList:s}=(0,R.n)(),t=(0,r.useMemo)(()=>{let t=e.length,a=s.length,r=s.filter(e=>e.mastered).length;return{totalBiases:t,viewedBiases:a,masteredBiases:r,completionPercentage:t>0?a/t*100:0,masteryPercentage:a>0?r/a*100:0}},[e,s]);return 0===e.length?null:(0,a.jsxs)(S.Zp,{className:"border-l-4 border-l-green-500 bg-green-50/50 dark:bg-green-950/20",children:[(0,a.jsx)(S.aR,{className:"pb-3",children:(0,a.jsxs)(S.ZB,{className:"flex items-center gap-2 text-green-900 dark:text-green-100",children:[(0,a.jsx)(f.A,{className:"h-5 w-5"}),"Your Learning Progress"]})}),(0,a.jsxs)(S.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Bias Coverage"}),(0,a.jsxs)("span",{className:"text-sm text-green-700 dark:text-green-300",children:[t.viewedBiases," / ",t.totalBiases]})]}),(0,a.jsx)(D.k,{value:t.completionPercentage,className:"h-2"}),(0,a.jsxs)("div",{className:"text-xs text-green-600 dark:text-green-400",children:[t.completionPercentage.toFixed(1),"% of all biases viewed"]})]}),t.viewedBiases>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Mastery Rate"}),(0,a.jsxs)("span",{className:"text-sm text-green-700 dark:text-green-300",children:[t.masteredBiases," / ",t.viewedBiases]})]}),(0,a.jsx)(D.k,{value:t.masteryPercentage,className:"h-2"}),(0,a.jsxs)("div",{className:"text-xs text-green-600 dark:text-green-400",children:[t.masteryPercentage.toFixed(1),"% of viewed biases mastered"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,a.jsxs)("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:t.viewedBiases}),(0,a.jsx)("div",{className:"text-xs text-green-700 dark:text-green-300",children:"Viewed"})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:t.masteredBiases}),(0,a.jsx)("div",{className:"text-xs text-green-700 dark:text-green-300",children:"Mastered"})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t border-green-200 dark:border-green-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[(0,a.jsx)(w.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["With ",t.totalBiases," biases, you'll see each one approximately every ",Math.ceil(t.totalBiases/30)," month",1!==Math.ceil(t.totalBiases/30)?"s":""]})]})})]})]})}var T=t(32096),V=t(61983),M=t(4004),F=t(79378),L=t(60601),I=t(69386),O=t.n(I);function W(e){let{className:s}=e,{allBiases:t,progressList:i,progressStats:l}=(0,R.n)(),n=(0,r.useMemo)(()=>{let e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),t=s+864e5-1,a=i.filter(e=>e.viewedAt&&e.viewedAt>=s&&e.viewedAt<=t).length;return{viewed:a,mastered:i.filter(e=>e.mastered&&e.viewedAt&&e.viewedAt>=s&&e.viewedAt<=t).length,goal:1,completionRate:Math.min(a/1*100,100)}},[i]),d=(0,r.useMemo)(()=>{let e=new Date,s=new Date(e);s.setDate(e.getDate()-e.getDay());let t=i.filter(t=>{if(!t.viewedAt)return!1;let a=new Date(t.viewedAt);return a>=s&&a<=e}).length;return{viewed:t,goal:7,completionRate:Math.min(t/7*100,100)}},[i]),c=(0,r.useMemo)(()=>{let e=new Date,s=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),a=s+864e5-1,r=i.filter(e=>e.viewedAt&&e.viewedAt>=s&&e.viewedAt<=a),l={};return r.forEach(e=>{let s=t.find(s=>s.id===e.biasId);s&&(l[s.category]=(l[s.category]||0)+1)}),Object.entries(l).map(e=>{let[s,t]=e;return{category:s,count:t,percentage:t/n.viewed*100}})},[i,t,n.viewed]);return(0,a.jsx)(u.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:s,children:(0,a.jsxs)(S.Zp,{className:"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20",children:[(0,a.jsx)(S.aR,{className:"pb-3",children:(0,a.jsxs)(S.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-blue-900 dark:text-blue-100",children:"Today's Progress"})]}),(0,a.jsx)(O(),{href:"/analytics",children:(0,a.jsxs)(T.$,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",children:["View Details",(0,a.jsx)(V.A,{className:"ml-1 h-3 w-3"})]})})]})}),(0,a.jsxs)(S.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Daily Goal"}),(0,a.jsxs)("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:[n.viewed,"/",n.goal]})]}),(0,a.jsx)(D.k,{value:n.completionRate,className:"h-2"}),n.completionRate>=100&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[(0,a.jsx)(M.A,{className:"h-3 w-3"}),"Goal achieved! \uD83C\uDF89"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Weekly Progress"}),(0,a.jsxs)("span",{className:"text-sm text-blue-700 dark:text-blue-300",children:[d.viewed,"/7"]})]}),(0,a.jsx)(D.k,{value:d.completionRate,className:"h-2"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[(0,a.jsxs)("div",{className:"text-center p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:n.viewed}),(0,a.jsx)("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Today"})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-900 dark:text-green-100",children:n.mastered}),(0,a.jsx)("div",{className:"text-xs text-green-700 dark:text-green-300",children:"Mastered"})]})]}),c.length>0&&(0,a.jsxs)("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-800",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Today's Categories"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:c.map(e=>{let{category:s,count:t}=e;return(0,a.jsxs)(A.E,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:border-blue-700",children:[s," (",t,")"]},s)})})]}),(0,a.jsx)("div",{className:"pt-2 border-t border-blue-200 dark:border-blue-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[(0,a.jsx)(F.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Current Streak: ",l.currentStreak," days"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-400",children:[(0,a.jsx)(L.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Best: ",l.longestStreak," days"]})]})]})})]})]})})}var Z=t(66092),U=t(25995),Y=t(81308),G=t(74682),K=t(93224);function _(){let{allBiases:e,biasesLoading:s,biasesError:t,refreshBiases:c,toggleFavorite:o,isFavorite:m,settings:u,settingsLoading:x,progressList:h,progressLoading:p,markAsViewed:f,toggleMastered:N,isMastered:y}=(0,R.n)(),[w,k]=(0,r.useState)(null),[C,B]=(0,r.useState)(!1),[S,A]=(0,r.useState)(!1),{toast:D}=(0,Y.dj)(),{speak:V,stop:M}=(0,U.m)();(0,r.useEffect)(()=>{localStorage.getItem("onboarding-completed")||(window.location.href="/onboarding")},[]);let{isListening:F,isSupported:L,toggleListening:I}=function(e){let{onReadCommand:s,onStopCommand:t,enabled:a=!0}=e,[i,l]=(0,r.useState)(!1),[n,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(""),m=(0,r.useRef)(null),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{{let e=window.SpeechRecognition||window.webkitSpeechRecognition;e&&(d(!0),m.current=new e,m.current.continuous=!0,m.current.interimResults=!0,m.current.lang="en-US",m.current.maxAlternatives=3,m.current.serviceURI=void 0)}},[]);let x=(0,r.useCallback)(()=>{if(n&&m.current&&a)try{m.current.start(),l(!0),v.v.log("[Voice Commands] Started listening...")}catch(e){v.v.error("[Voice Commands] Error starting:",e)}},[n,a]),g=(0,r.useCallback)(()=>{if(m.current)try{m.current.stop(),l(!1),u.current&&(clearTimeout(u.current),u.current=null),v.v.log("[Voice Commands] Stopped listening")}catch(e){v.v.error("[Voice Commands] Error stopping:",e)}},[]);(0,r.useEffect)(()=>{m.current&&(m.current.onresult=e=>{let a="",r="";for(let s=e.resultIndex;s<e.results.length;s++){let t=e.results[s],i=t[0].transcript.toLowerCase().trim(),l=t[0].confidence||0;(l>0||!l)&&(t.isFinal?(a+=i+" ",v.v.log("[Voice Commands] Final result:",i,l?"(confidence: ".concat(l.toFixed(2),")"):"")):(r+=i,v.v.log("[Voice Commands] Interim result:",i,l?"(confidence: ".concat(l.toFixed(2),")"):"")))}o((a+r).trim());let i=(a||r).trim();if(i){v.v.log("[Voice Commands] Processing transcript:",i);let e=[/\b(read|reed|red)\b/,/\b(listen|listening)\b/,/\b(play|playing)\b/,/\b(speak|speaking)\b/,/\b(start)\b/],a=[/\b(stop|stopping)\b/,/\b(pause|pausing)\b/,/\b(quiet|quietly)\b/,/\b(silence|silent)\b/,/\b(end|ending)\b/,/\b(cease|ceasing)\b/,/\b(halt|halting)\b/,/\b(quit|quitting)\b/,/\b(cancel|canceling)\b/,/\b(abort|aborting)\b/];if(e.some(e=>e.test(i))){v.v.log("[Voice Commands] READ command detected!"),null==s||s(),o("");return}if(a.some(e=>e.test(i))){v.v.log("[Voice Commands] STOP command detected!"),null==t||t(),o("");return}if(["stop","pause","quiet","end","halt"].some(e=>i===e||i.endsWith(e))){v.v.log("[Voice Commands] SHORT STOP command detected!"),null==t||t(),o("");return}u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{if(i){if(v.v.log("[Voice Commands] Timeout check for:",i),e.some(e=>e.test(i))){v.v.log("[Voice Commands] READ command detected via timeout!"),null==s||s(),o("");return}if(a.some(e=>e.test(i))){v.v.log("[Voice Commands] STOP command detected via timeout!"),null==t||t(),o("");return}}},1e3)}},m.current.onerror=e=>{switch(v.v.error("[Voice Commands] Error:",e.error),e.error){case"no-speech":v.v.log("[Voice Commands] No speech detected, restarting..."),setTimeout(()=>{i&&a&&(g(),setTimeout(x,100))},100);break;case"audio-capture":v.v.error("[Voice Commands] Audio capture error - microphone not available"),l(!1);break;case"not-allowed":v.v.error("[Voice Commands] Permission denied - microphone access blocked"),l(!1);break;case"network":v.v.error("[Voice Commands] Network error - speech recognition service unavailable"),l(!1);break;default:v.v.error("[Voice Commands] Unknown error:",e.error),setTimeout(()=>{i&&a&&(g(),setTimeout(x,500))},500)}},m.current.onend=()=>{v.v.log("[Voice Commands] Recognition ended"),i&&a&&setTimeout(x,100)})},[i,a,s,t,x,g]);let h=(0,r.useCallback)(()=>{i?g():x()},[i,x,g]);return{isListening:i,isSupported:n,transcript:c,startListening:x,stopListening:g,toggleListening:h}}({onReadCommand:()=>{if(!w){D({title:"No bias available",description:"Wait for the bias to load first."});return}V("".concat(w.title,". ").concat(w.summary,". Why it happens: ").concat(w.why,". How to counter it: ").concat(w.counter,".")),D({title:"\uD83C\uDFA4 Voice Command Received",description:"Reading the bias aloud..."})},onStopCommand:()=>{M(),D({title:"\uD83D\uDED1 Voice Command Received",description:"Stopped reading."})},enabled:!0}),O=(0,r.useMemo)(()=>{v.v.log("[DailyBias] Calculating daily bias - biases:",e.length,"progress:",h.length,"biasesLoading:",s,"progressLoading:",p);let t=(0,Z.rT)(),a=function(e){try{let s=localStorage.getItem("daily-bias-cache");if(s){let t=JSON.parse(s);if(t.date===e)return t.biasId}}catch(e){v.v.error("Error reading cached daily bias:",e)}return null}(t);if(a){if(e.length>0){let s=e.find(e=>e.id===a);if(s)return v.v.log("[DailyBias] Using cached bias from allBiases:",s.title),s}else if(s)try{let e=(0,Z.FS)().find(e=>e.id===a);if(e)return v.v.log("[DailyBias] Using cached bias from core biases (during load):",e.title),e}catch(e){v.v.error("[DailyBias] Error loading core biases for cache:",e)}}if(0===e.length)return v.v.log("[DailyBias] Skipping daily bias calculation - no biases available"),null;v.v.log("[DailyBias] Today's date:",t),v.v.log("[DailyBias] Cached bias ID:",a);try{let s=(0,Z.f4)(e,h,t);return!function(e,s){try{localStorage.setItem("daily-bias-cache",JSON.stringify({date:e,biasId:s}))}catch(e){v.v.error("Error caching daily bias:",e)}}(t,s.id),v.v.log("[DailyBias] Calculated and cached new bias:",s.title),s}catch(s){if(v.v.error("[DailyBias] Error calculating daily bias:",s),e.length>0)return v.v.log("[DailyBias] Using fallback bias:",e[0].title),e[0];return null}},[e,h,s,p]);(0,r.useEffect)(()=>{O?k(O):s||p||!(e.length>0)||O||(e.length>0&&!w?(v.v.warn("[DailyBias] No bias calculated, using first available bias as fallback"),k(e[0])):(v.v.warn("[DailyBias] No bias available despite having data"),k(null)))},[O,s,p,e.length,w]),(0,r.useEffect)(()=>{w&&(m(w.id).then(B),y(w.id).then(A),f(w.id))},[w,m,y,f]);let _=async e=>{w&&(null==e||e.preventDefault(),null==e||e.stopPropagation(),await o(w.id),B(await m(w.id)))},q=async e=>{w&&(null==e||e.preventDefault(),null==e||e.stopPropagation(),A(await N(w.id)))},z=s||x||p,J=(0,Z.rT)().split("-").reduce((e,s)=>e+Number.parseInt(s),0),$=async()=>(!function(e){try{if(e){let s=localStorage.getItem("daily-bias-cache");s&&JSON.parse(s).date===e&&(localStorage.removeItem("daily-bias-cache"),v.v.log("Cleared daily bias cache for date:",e))}else localStorage.removeItem("daily-bias-cache"),v.v.log("Cleared all daily bias cache")}catch(e){v.v.error("Error clearing daily bias cache:",e)}}((0,Z.rT)()),new Promise(e=>{setTimeout(()=>{window.location.reload(),e()},500)}));return(0,a.jsxs)("div",{className:"min-h-screen pb-20 sm:pb-24",children:[(0,a.jsx)(j,{onRefresh:$,enabled:!z}),(0,a.jsx)(l.i,{style:u.backgroundStyle,seed:J}),(0,a.jsx)(i.P,{isVoiceListening:F,onToggleVoiceCommands:()=>{I(),F?D({title:"\uD83C\uDFA4 Voice Commands Off",description:"Click the button to enable voice commands again."}):D({title:"\uD83C\uDFA4 Voice Commands Active",description:"Say 'read' to hear the bias aloud, or 'stop' to pause.",duration:4e3})},voiceCommandsSupported:L}),(0,a.jsx)("main",{id:"main-content",className:"mx-auto w-full max-w-2xl px-3 py-4 sm:px-4 sm:py-6 md:py-8","aria-label":"Daily cognitive bias",children:t&&!s?(0,a.jsx)(G.p,{icon:K.A,title:"Failed to load biases",description:t||"Unable to load cognitive biases. Please try refreshing.",action:(0,a.jsxs)(T.$,{onClick:()=>c(),variant:"outline",className:"cursor-pointer",children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Retry"]})}):s||0!==e.length?w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{className:"mb-6",tiltStrength:8,glareEnabled:!0,children:(0,a.jsx)(n.F,{bias:w,variant:"detailed",isFavorite:C,onToggleFavorite:_,isMastered:S,onToggleMastered:q})}),(0,a.jsx)(P,{showDetails:!1}),(0,a.jsx)(W,{}),(0,a.jsx)(E,{})]}):(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",role:"status","aria-live":"polite","aria-busy":"true","aria-label":"Loading daily bias",children:[(0,a.jsx)("div",{className:"mb-4 grid grid-cols-2 gap-2 sm:mb-6 sm:gap-3",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"group relative overflow-hidden rounded-lg bg-card/50 backdrop-blur-sm border border-border/50 p-4 shadow-depth-1",children:[(0,a.jsx)("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-primary/5 to-transparent",style:{animationDelay:"".concat(100*e,"ms")}}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"h-12 w-full rounded bg-muted/50 sm:h-16"})})]},e))}),(0,a.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl bg-card/50 backdrop-blur-sm border-2 border-primary/20 p-4 shadow-depth-2 sm:rounded-3xl sm:p-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-primary/10 to-transparent",style:{animationDuration:"2s"}}),(0,a.jsx)("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-gradient-to-r from-transparent via-primary/30 to-transparent animate-pulse"}),(0,a.jsxs)("div",{className:"relative space-y-3 sm:space-y-4",children:[(0,a.jsx)("div",{className:"h-5 w-32 rounded bg-muted/50 sm:h-6 sm:w-40"}),(0,a.jsx)("div",{className:"h-7 w-40 rounded bg-muted/50 sm:h-8 sm:w-48"}),(0,a.jsx)("div",{className:"h-16 w-full rounded bg-muted/50 sm:h-20"})]})]}),(0,a.jsxs)("div",{className:"group relative overflow-hidden rounded-xl bg-card/60 backdrop-blur-md border border-border/60 p-4 shadow-depth-2 sm:rounded-2xl sm:p-6 md:p-8",children:[(0,a.jsx)("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-primary/8 to-transparent",style:{animationDuration:"2s"}}),(0,a.jsx)("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-gradient-to-r from-transparent via-primary/20 to-transparent animate-pulse"}),(0,a.jsxs)("div",{className:"relative space-y-4 sm:space-y-6",children:[(0,a.jsx)("div",{className:"h-6 w-24 rounded bg-muted/50 sm:h-8 sm:w-32"}),(0,a.jsx)("div",{className:"h-10 w-full rounded bg-muted/50 sm:h-12"}),(0,a.jsx)("div",{className:"h-20 w-full rounded bg-muted/50 sm:h-24"}),(0,a.jsx)("div",{className:"h-24 w-full rounded bg-muted/50 sm:h-32"}),(0,a.jsx)("div",{className:"h-24 w-full rounded bg-muted/50 sm:h-32"}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)("div",{className:"h-10 flex-1 rounded bg-muted/50"}),(0,a.jsx)("div",{className:"h-10 flex-1 rounded bg-muted/50"}),(0,a.jsx)("div",{className:"h-10 flex-1 rounded bg-muted/50"})]})]})]}),(0,a.jsx)("span",{className:"sr-only",children:"Loading today's cognitive bias..."})]}):(0,a.jsx)(G.p,{icon:K.A,title:"No biases available",description:"No cognitive biases were found. This might be a configuration issue.",action:(0,a.jsxs)(T.$,{onClick:()=>c(),variant:"outline",className:"cursor-pointer",children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Refresh"]})})}),(0,a.jsx)(d.A,{})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[209,223,358],()=>s(37152)),_N_E=e.O()}]);