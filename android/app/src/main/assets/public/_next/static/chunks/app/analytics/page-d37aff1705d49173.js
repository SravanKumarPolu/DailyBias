(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{21578:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>K});var t=a(74459),r=a(25803),l=a(11334),i=a(99170),c=a(10304),d=a(96191),n=a(91357),x=a(38070),o=a(20612),m=a(10564),h=a(20316),g=a(61417),p=a(68817),j=a(60101),u=a(36210),y=a(96481),v=a(63461),b=a(32096),N=a(12890);function f(e){let{biasId:s,showAll:a=!1}=e,[i,x]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[g,f]=(0,r.useState)(0),w=(0,r.useCallback)(async()=>{let e=null;try{h(!0),e=setTimeout(()=>{l.v.warn("Quality metrics loading took too long, showing default values"),h(!1),x([]),f(0)},3e3);let a=[];if(s){let e=await N.t.getQualityMetrics(s).catch(e=>(l.v.error("Error loading single quality metric:",e),null));a=e?[e]:[]}else a=await N.t.getAllQualityMetrics().catch(e=>(l.v.error("Error loading all quality metrics:",e),[]));if(e&&(clearTimeout(e),e=null),x(a),a.length>0){let e=a.reduce((e,s)=>e+(.3*s.accuracyScore+.25*s.clarityScore+.25*s.completenessScore+.2*s.userRating),0);f(e/a.length)}else f(0)}catch(e){l.v.error("Error loading quality metrics:",e),x([]),f(0)}finally{e&&clearTimeout(e),h(!1)}},[s]);(0,r.useEffect)(()=>{w()},[w]);let k=e=>e>=.8?{label:"Excellent",color:"bg-green-100 text-green-800"}:e>=.6?{label:"Good",color:"bg-yellow-100 text-yellow-800"}:{label:"Needs Improvement",color:"bg-red-100 text-red-800"},S=e=>new Date(e).toLocaleDateString();return m?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},e))})]})}):0!==i.length||m?(0,t.jsxs)("div",{className:"space-y-6",children:[a&&(0,t.jsxs)(u.Zp,{className:"border-l-4 border-l-blue-500",children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"h-5 w-5 text-blue-600"}),"Overall Content Health"]})}),(0,t.jsxs)(u.Wu,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:[(100*g).toFixed(1),"%"]}),(0,t.jsx)(y.E,{className:k(g).color,children:k(g).label})]}),(0,t.jsx)(v.k,{value:100*g,className:"h-2"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Based on ",i.length," content item",1!==i.length?"s":""]})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:i.map((e,s)=>{let a=.3*e.accuracyScore+.25*e.clarityScore+.25*e.completenessScore+.2*e.userRating;return(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,t.jsxs)(u.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(u.ZB,{className:"text-lg",children:e.biasId.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,t.jsx)(y.E,{className:k(a).color,children:k(a).label})]})}),(0,t.jsx)(u.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 text-green-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Accuracy"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:(10*e.accuracyScore).toFixed(1)}),(0,t.jsx)(v.k,{value:100*e.accuracyScore,className:"mt-1 h-1"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,t.jsx)(n.A,{className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Clarity"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:(10*e.clarityScore).toFixed(1)}),(0,t.jsx)(v.k,{value:100*e.clarityScore,className:"mt-1 h-1"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 text-yellow-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Completeness"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:(10*e.completenessScore).toFixed(1)}),(0,t.jsx)(v.k,{value:100*e.completenessScore,className:"mt-1 h-1"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,t.jsx)(c.A,{className:"h-4 w-4 text-purple-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"User Rating"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:(10*e.userRating).toFixed(1)}),(0,t.jsx)(v.k,{value:100*e.userRating,className:"mt-1 h-1"})]})]}),e.expertReviewScore&&(0,t.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-950/20 p-3 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:"Expert Review Score"}),(0,t.jsxs)("span",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:[(10*e.expertReviewScore).toFixed(1),"/10"]})]}),(0,t.jsx)(v.k,{value:100*e.expertReviewScore,className:"mt-2 h-2"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 pt-2 border-t",children:[(0,t.jsxs)("span",{children:["Last updated: ",S(e.lastUpdated)]}),(0,t.jsxs)("span",{children:["Version: ",e.version]})]})]})})]})},e.biasId)})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(b.$,{onClick:w,variant:"outline",children:"Refresh Data"}),a&&(0,t.jsx)(b.$,{variant:"outline",children:"Export Report"})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[a&&(0,t.jsxs)(u.Zp,{className:"border-l-4 border-l-blue-500",children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"h-5 w-5 text-blue-600"}),"Overall Content Health"]})}),(0,t.jsxs)(u.Wu,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:"0%"}),(0,t.jsx)(y.E,{className:"bg-gray-100 text-gray-800",children:"No Data"})]}),(0,t.jsx)(v.k,{value:0,className:"h-2"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"No quality metrics available yet"})]})]}),(0,t.jsx)(u.Zp,{className:"glass shadow-glass",children:(0,t.jsxs)(u.Wu,{className:"p-8 text-center",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Quality Data Available"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4 max-w-md mx-auto",children:"Quality metrics will appear here once content is reviewed and rated. You can submit expert reviews or user ratings to generate quality data."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,t.jsx)(b.$,{onClick:w,variant:"outline",children:"Refresh Data"}),a&&(0,t.jsx)(b.$,{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},variant:"default",children:"Learn More"})]})]})})]})}var w=a(76988),k=a(21885),S=a(53946),R=a(20401),A=a(88102),C=a(11699),D=a(71677),Z=a(61985),W=a(19824),E=a(31352),M=a(53894),L=a(40233),F=a(31854),O=a(91901),B=a(79378),P=a(60601),T=a(44530),Q=a(89225);function I(e){let{className:s}=e,{allBiases:a,progressList:l,progressStats:n,progressLoading:x,progressError:m}=(0,L.n)(),h=(0,r.useMemo)(()=>{let e=new Date,s=new Date(e);s.setDate(e.getDate()-29);let a={};for(let e=0;e<30;e++){let t=new Date(s);t.setDate(s.getDate()+e);let r=t.toISOString().split("T")[0],l=t.toLocaleDateString("en-US",{month:"short",day:"numeric"});a[r]={date:l,biases:0,mastered:0,streak:0}}l.forEach(e=>{if(e.viewedAt){let s=new Date(e.viewedAt).toISOString().split("T")[0];a[s]&&(a[s].biases++,e.mastered&&a[s].mastered++)}});let t=0;for(let e of Object.keys(a).sort().reverse())if(a[e].biases>0)t++,a[e].streak=t;else break;return Object.values(a).reverse()},[l]),g=(0,r.useMemo)(()=>{let e={};return a.forEach(s=>{e[s.category]||(e[s.category]={viewed:0,mastered:0,total:0}),e[s.category].total++}),l.forEach(s=>{let t=a.find(e=>e.id===s.biasId);t&&e[t.category]&&(e[t.category].viewed++,s.mastered&&e[t.category].mastered++)}),Object.entries(e).map(e=>{let[s,a]=e;return{category:(0,F.F)(s),viewed:a.viewed,mastered:a.mastered,total:a.total,completionRate:a.total>0?a.viewed/a.total*100:0,masteryRate:a.viewed>0?a.mastered/a.viewed*100:0}})},[a,l]),j=(0,r.useMemo)(()=>{let e={};return l.forEach(s=>{if(s.viewedAt){let a=new Date(s.viewedAt),t=new Date(a);t.setDate(a.getDate()-a.getDay());let r=t.toISOString().split("T")[0],l="Week ".concat(Math.ceil((new Date().getTime()-t.getTime())/6048e5));e[r]||(e[r]={week:l,biases:0,mastered:0}),e[r].biases++,s.mastered&&e[r].mastered++}}),Object.values(e).slice(-8)},[l]),b=(0,r.useMemo)(()=>{let e={},s=0;return l.filter(e=>e.mastered).sort((e,s)=>e.viewedAt-s.viewedAt).forEach(a=>{let t=new Date(a.viewedAt).toISOString().split("T")[0];s++,e[t]=s}),Object.entries(e).map(e=>{let[s,a]=e;return{date:new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),mastered:a}})},[l]);if(x)return(0,t.jsxs)("div",{className:"space-y-6 ".concat(s),children:[(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,t.jsx)(u.Zp,{className:"border-l-4",children:(0,t.jsx)(u.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"})]})})},e))}),(0,t.jsx)(u.Zp,{children:(0,t.jsx)(u.Wu,{className:"p-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,t.jsx)("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})})})]});if(m)return(0,t.jsx)("div",{className:"space-y-6 ".concat(s),children:(0,t.jsx)(u.Zp,{className:"border-l-4 border-l-red-500",children:(0,t.jsxs)(u.Wu,{className:"p-8 text-center",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Error Loading Progress"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:m})]})})});let N=n||{totalBiasesRead:0,masteredCount:0,currentStreak:0,longestStreak:0,lastViewedDate:null};return(0,t.jsxs)("div",{className:"space-y-6 ".concat(s),children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,t.jsx)(u.Zp,{className:"border-l-4 border-l-blue-500",children:(0,t.jsx)(u.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O.A,{className:"h-5 w-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:N.totalBiasesRead}),(0,t.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Biases Read"})]})]})})})}),(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,t.jsx)(u.Zp,{className:"border-l-4 border-l-green-500",children:(0,t.jsx)(u.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 text-green-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:N.masteredCount}),(0,t.jsx)("p",{className:"text-xs text-green-700 dark:text-green-300",children:"Mastered"})]})]})})})}),(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,t.jsx)(u.Zp,{className:"border-l-4 border-l-orange-500",children:(0,t.jsx)(u.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(B.A,{className:"h-5 w-5 text-orange-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:N.currentStreak}),(0,t.jsx)("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"Day Streak"})]})]})})})}),(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,t.jsx)(u.Zp,{className:"border-l-4 border-l-purple-500",children:(0,t.jsx)(u.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(P.A,{className:"h-5 w-5 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:N.longestStreak}),(0,t.jsx)("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:"Best Streak"})]})]})})})})]}),(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(i.A,{className:"h-5 w-5 text-blue-600"}),"Daily Learning Activity"]})}),(0,t.jsx)(u.Wu,{children:(0,t.jsx)("div",{className:"h-64",children:h.length>0?(0,t.jsx)(w.u,{width:"100%",height:"100%",children:(0,t.jsxs)(k.Q,{data:h,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"colorBiases",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,t.jsxs)("linearGradient",{id:"colorMastered",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})]}),(0,t.jsx)(S.d,{strokeDasharray:"3 3",stroke:"#e5e7eb",opacity:.3}),(0,t.jsx)(R.W,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),(0,t.jsx)(A.h,{stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),(0,t.jsx)(C.m,{contentStyle:{background:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(D.G,{type:"monotone",dataKey:"biases",stackId:"1",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorBiases)",name:"Viewed"}),(0,t.jsx)(D.G,{type:"monotone",dataKey:"mastered",stackId:"1",stroke:"#10b981",strokeWidth:2,fill:"url(#colorMastered)",name:"Mastered"})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No activity data available yet"})})})})]})}),(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(T.A,{className:"h-5 w-5 text-green-600"}),"Category Progress"]})}),(0,t.jsx)(u.Wu,{children:g.length>0?(0,t.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.E,{className:(0,F.e)(e.category.toLowerCase()),children:e.category}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.viewed,"/",e.total]})]}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[e.completionRate.toFixed(1),"%"]})]}),(0,t.jsx)(v.k,{value:e.completionRate,className:"h-2"}),e.viewed>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Mastery: ",e.masteryRate.toFixed(1),"%"]}),(0,t.jsxs)("span",{children:[e.mastered," mastered"]})]})]},e.category))}):(0,t.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No category data available yet"})})})]})}),(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},children:(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(Q.A,{className:"h-5 w-5 text-purple-600"}),"Weekly Progress"]})}),(0,t.jsx)(u.Wu,{children:(0,t.jsx)("div",{className:"h-64",children:j.length>0?(0,t.jsx)(w.u,{width:"100%",height:"100%",children:(0,t.jsxs)(Z.E,{data:j,children:[(0,t.jsx)(S.d,{strokeDasharray:"3 3",stroke:"#e5e7eb",opacity:.3}),(0,t.jsx)(R.W,{dataKey:"week",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),(0,t.jsx)(A.h,{stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),(0,t.jsx)(C.m,{contentStyle:{background:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(W.y,{dataKey:"biases",fill:"#3b82f6",name:"Viewed",radius:[2,2,0,0]}),(0,t.jsx)(W.y,{dataKey:"mastered",fill:"#10b981",name:"Mastered",radius:[2,2,0,0]})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No weekly data available yet"})})})})]})}),(0,t.jsx)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},children:(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"h-5 w-5 text-yellow-600"}),"Mastery Timeline"]})}),(0,t.jsx)(u.Wu,{children:(0,t.jsx)("div",{className:"h-64",children:b.length>0?(0,t.jsx)(w.u,{width:"100%",height:"100%",children:(0,t.jsxs)(E.b,{data:b,children:[(0,t.jsx)(S.d,{strokeDasharray:"3 3",stroke:"#e5e7eb",opacity:.3}),(0,t.jsx)(R.W,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),(0,t.jsx)(A.h,{stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),(0,t.jsx)(C.m,{contentStyle:{background:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(M.N,{type:"monotone",dataKey:"mastered",stroke:"#f59e0b",strokeWidth:3,dot:{fill:"#f59e0b",strokeWidth:2,r:4},name:"Cumulative Mastered"})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No mastery data available yet. Mark biases as mastered to see your progress!"})})})})]})})]})}var q=a(11780),z=a(91327);function K(){let{settings:e}=(0,q.t)(),s=(0,z.useRouter)(),[a,p]=(0,r.useState)("overview"),[j,v]=(0,r.useState)([]),[w,k]=(0,r.useState)({averageQualityScore:0,expertReviewsCount:0,userFeedbackCount:0}),[S,R]=(0,r.useState)([]),[A,C]=(0,r.useState)({approved:0,pending:0,needsRevision:0,averageAccuracy:0,averageClarity:0,averageCompleteness:0}),[D,Z]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=!0,s=null;return(async()=>{try{Z(!0),s=setTimeout(()=>{e&&(l.v.warn("Analytics data loading took too long, showing default values"),Z(!1),v([]),k({averageQualityScore:0,expertReviewsCount:0,userFeedbackCount:0}),R([]),C({approved:0,pending:0,needsRevision:0,averageAccuracy:0,averageClarity:0,averageCompleteness:0}))},3e3);let[a,t,r,i]=await Promise.all([N.t.getContentNeedingReview().catch(e=>(l.v.error("Error loading content needing review:",e),[])),N.t.getOverviewStatistics().catch(e=>(l.v.error("Error loading overview statistics:",e),{averageQualityScore:0,expertReviewsCount:0,userFeedbackCount:0})),N.t.getRecentActivity(10).catch(e=>(l.v.error("Error loading recent activity:",e),[])),N.t.getReviewStatistics().catch(e=>(l.v.error("Error loading review statistics:",e),{approved:0,pending:0,needsRevision:0,averageAccuracy:0,averageClarity:0,averageCompleteness:0}))]);s&&(clearTimeout(s),s=null),e&&(v(a),k(t),R(r),C(i),Z(!1))}catch(a){l.v.error("Error loading analytics data:",a),s&&(clearTimeout(s),s=null),e&&(v([]),k({averageQualityScore:0,expertReviewsCount:0,userFeedbackCount:0}),R([]),C({approved:0,pending:0,needsRevision:0,averageAccuracy:0,averageClarity:0,averageCompleteness:0}),Z(!1))}})(),()=>{e=!1,s&&clearTimeout(s)}},[]);let W=[{id:"overview",label:"Overview",icon:i.A},{id:"progress",label:"Learning Progress",icon:c.A},{id:"quality",label:"Content Quality",icon:d.A},{id:"reviews",label:"Reviews",icon:n.A}],E=e=>{let s=Math.floor(Math.floor((Date.now()-e)/1e3)/60),a=Math.floor(s/60),t=Math.floor(a/24);return t>0?"".concat(t," day").concat(1!==t?"s":""," ago"):a>0?"".concat(a," hour").concat(1!==a?"s":""," ago"):s>0?"".concat(s," minute").concat(1!==s?"s":""," ago"):"Just now"},M=e=>e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),L=e=>{switch(e){case"review":return d.A;case"feedback":return n.A;case"update":return c.A}},F=e=>{switch(e){case"review":return"bg-green-100 dark:bg-green-900 text-green-600";case"feedback":return"bg-blue-100 dark:bg-blue-900 text-blue-600";case"update":return"bg-purple-100 dark:bg-purple-900 text-purple-600"}};return(0,t.jsxs)("div",{className:"min-h-screen pb-20 sm:pb-24",children:[(0,t.jsx)(h.i,{style:e.backgroundStyle,seed:888}),(0,t.jsx)(m.P,{}),(0,t.jsxs)("main",{className:"mx-auto w-full max-w-4xl px-3 py-4 sm:px-4 sm:py-6 md:py-8",children:[(0,t.jsxs)(b.$,{variant:"ghost",onClick:()=>s.back(),className:"touch-target hover-grow button-press mb-4 cursor-pointer transition-all duration-200 sm:mb-6","aria-label":"Go back to previous page",children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Back"]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"glass shadow-glass animate-fade-in-up rounded-xl p-6 text-center sm:rounded-2xl sm:p-8",children:[(0,t.jsx)("h1",{className:"text-responsive-3xl mb-3 font-bold tracking-tight sm:mb-4",children:"Content Analytics"}),(0,t.jsx)("p",{className:"text-muted-foreground text-responsive-lg text-balance",children:"Monitor content quality, user feedback, and expert reviews"})]}),(0,t.jsx)("div",{className:"glass shadow-glass animate-fade-in-up rounded-xl p-4 sm:rounded-2xl sm:p-6",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:W.map(e=>{let s=e.icon;return(0,t.jsxs)(b.$,{variant:a===e.id?"default":"outline",onClick:()=>p(e.id),className:"flex items-center gap-2",children:[(0,t.jsx)(s,{className:"h-4 w-4"}),e.label]},e.id)})})}),j.length>0&&(0,t.jsxs)(u.Zp,{className:"border-l-4 border-l-orange-500 bg-orange-50/50 dark:bg-orange-950/20",children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2 text-orange-900 dark:text-orange-100",children:[(0,t.jsx)(o.A,{className:"h-5 w-5"}),"Content Needing Review"]})}),(0,t.jsxs)(u.Wu,{children:[(0,t.jsxs)("p",{className:"text-orange-800 dark:text-orange-200 mb-3",children:[j.length," content item",1!==j.length?"s":""," need",1===j.length?"s":""," expert review or have low quality scores."]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(e=>(0,t.jsx)(y.E,{variant:"outline",className:"text-orange-800 border-orange-300",children:e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:["overview"===a&&(0,t.jsx)("div",{className:"space-y-6",children:D?(0,t.jsx)(u.Zp,{children:(0,t.jsx)(u.Wu,{className:"p-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},e))})]})})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"h-5 w-5 text-blue-600"}),"Content Health Overview"]})}),(0,t.jsx)(u.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[(100*w.averageQualityScore).toFixed(0),"%"]}),(0,t.jsx)("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Average Quality Score"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:w.expertReviewsCount}),(0,t.jsx)("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Expert Reviews"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:w.userFeedbackCount}),(0,t.jsx)("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"User Feedback"})]})]})})]}),(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsx)(u.ZB,{children:"Recent Activity"})}),(0,t.jsx)(u.Wu,{children:0===S.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No recent activity to display"})}):(0,t.jsx)("div",{className:"space-y-3",children:S.map((e,s)=>{let a=L(e.type);return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,t.jsx)("div",{className:"".concat(F(e.type)," p-2 rounded-lg"),children:(0,t.jsx)(a,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[e.description,' for "',M(e.biasId),'"']}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:E(e.timestamp)})]})]},"".concat(e.biasId,"-").concat(e.timestamp,"-").concat(s))})})})]})]})}),"progress"===a&&(0,t.jsx)(I,{}),"quality"===a&&(0,t.jsx)(f,{showAll:!0}),"reviews"===a&&(0,t.jsx)("div",{className:"space-y-6",children:D?(0,t.jsx)(u.Zp,{children:(0,t.jsx)(u.Wu,{className:"p-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"},e))}),(0,t.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"},e))})]})]})})}):(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsx)(u.ZB,{children:"Review Statistics"})}),(0,t.jsxs)(u.Wu,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Review Status"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved"}),(0,t.jsx)("span",{className:"font-medium",children:A.approved})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"}),(0,t.jsx)("span",{className:"font-medium",children:A.pending})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Needs Revision"}),(0,t.jsx)("span",{className:"font-medium",children:A.needsRevision})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Average Scores"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Accuracy"}),(0,t.jsxs)("span",{className:"font-medium",children:[A.averageAccuracy>0?(10*A.averageAccuracy).toFixed(1):"0.0","/10"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clarity"}),(0,t.jsxs)("span",{className:"font-medium",children:[A.averageClarity>0?(10*A.averageClarity).toFixed(1):"0.0","/10"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completeness"}),(0,t.jsxs)("span",{className:"font-medium",children:[A.averageCompleteness>0?(10*A.averageCompleteness).toFixed(1):"0.0","/10"]})]})]})]})]}),0===A.approved&&0===A.pending&&0===A.needsRevision&&(0,t.jsx)("div",{className:"mt-6 text-center py-4 text-gray-500 dark:text-gray-400",children:(0,t.jsx)("p",{children:"No reviews available yet. Reviews will appear here once expert reviews are completed."})})]})]})})]})]})]}),(0,t.jsx)(g.A,{})]})}},80495:(e,s,a)=>{Promise.resolve().then(a.bind(a,21578))}},e=>{var s=s=>e(e.s=s);e.O(0,[593,209,223,358],()=>s(80495)),_N_E=e.O()}]);