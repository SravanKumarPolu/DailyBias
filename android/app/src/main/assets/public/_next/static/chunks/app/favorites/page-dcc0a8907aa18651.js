(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{2800:(e,a,s)=>{Promise.resolve().then(s.bind(s,36751))},36751:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var t=s(74459),r=s(25803),i=s(30647),o=s(8637),l=s(11334),n=s(10564),d=s(20316),c=s(24135),g=s(61417),m=s(74682),v=s(40233),u=s(32096),f=s(69386),h=s.n(f);function x(){let{allBiases:e,biasesLoading:a,favorites:s,toggleFavorite:f,favoritesLoading:x,settings:p,toggleMastered:b,isMastered:y}=(0,v.n)(),[j,N]=(0,r.useState)([]),[F,P]=(0,r.useState)({});(0,r.useEffect)(()=>{if(l.v.log("[FavoritesPage] Updating favorite biases"),l.v.log("[FavoritesPage] All biases:",e.length),l.v.log("[FavoritesPage] Favorites:",s.length),e.length>0&&s.length>0){let a=new Set(s.map(e=>e.biasId));l.v.log("[FavoritesPage] Favorite IDs:",Array.from(a));let t=e.filter(e=>a.has(e.id));l.v.log("[FavoritesPage] Filtered biases:",t.length),t.sort((e,a)=>{let t=s.find(a=>a.biasId===e.id),r=s.find(e=>e.biasId===a.id);return((null==r?void 0:r.addedAt)||0)-((null==t?void 0:t.addedAt)||0)}),l.v.log("[FavoritesPage] Sorted favorite biases:",t.map(e=>e.title)),N(t)}else l.v.log("[FavoritesPage] No favorites or biases available"),N([])},[e,s]),(0,r.useEffect)(()=>{(async()=>{if(j.length>0){l.v.log("[FavoritesPage] Loading mastered states for",j.length,"favorite biases");let e={};try{await Promise.all(j.map(async a=>{e[a.id]=await y(a.id)})),P(e),l.v.log("[FavoritesPage] Loaded mastered states:",Object.keys(e).length)}catch(e){l.v.error("[FavoritesPage] Error loading mastered states:",e)}}})()},[j,y]);let w=async e=>{l.v.log("[FavoritesPage] Toggling favorite for bias:",e);try{await f(e),l.v.log("[FavoritesPage] Successfully toggled favorite")}catch(e){l.v.error("[FavoritesPage] Error toggling favorite:",e)}},E=async e=>{l.v.log("[FavoritesPage] Toggling mastered for bias:",e);try{let a=await b(e);P(s=>({...s,[e]:a})),l.v.log("[FavoritesPage] Successfully toggled mastered:",a)}catch(e){l.v.error("[FavoritesPage] Error toggling mastered:",e)}},k=a||x;return(0,t.jsxs)("div",{className:"min-h-screen pb-20 sm:pb-24",children:[(0,t.jsx)(d.i,{style:p.backgroundStyle,seed:123}),(0,t.jsx)(n.P,{}),(0,t.jsx)("main",{id:"main-content",className:"mx-auto w-full max-w-4xl px-3 py-4 sm:px-4 sm:py-6 md:py-8",children:(0,t.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h1",{className:"mb-1 text-2xl font-bold sm:mb-2 sm:text-3xl md:text-4xl",children:"Favorites"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Your saved biases for quick reference"})]}),j.length>0&&(0,t.jsxs)(u.$,{onClick:()=>{l.v.log("[FavoritesPage] Exporting favorites:",j.length);try{let e=j.map(e=>{var a;return{title:e.title,category:e.category,summary:e.summary,why:e.why,counter:e.counter,source:e.source,addedAt:(null===(a=s.find(a=>a.biasId===e.id))||void 0===a?void 0:a.addedAt)||Date.now()}}),a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download="bias-daily-favorites-".concat(new Date().toISOString().slice(0,10),".json"),r.click(),URL.revokeObjectURL(t),l.v.log("[FavoritesPage] Export completed successfully")}catch(e){l.v.error("[FavoritesPage] Export failed:",e)}},variant:"outline",size:"sm",className:"glass border-border/50 touch-target hover-lift button-press shrink-0 cursor-pointer bg-transparent transition-all duration-200 sm:size-default","aria-label":"Export favorites as JSON",children:[(0,t.jsx)(i.A,{className:"h-4 w-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Export"})]})]}),!k&&j.length>0&&(0,t.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-sm sm:text-base",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 text-red-500","aria-hidden":"true"}),(0,t.jsxs)("span",{children:[j.length," ",1===j.length?"favorite":"favorites"]})]}),k?(0,t.jsxs)("div",{className:"glass animate-pulse rounded-xl p-8 text-center sm:rounded-2xl sm:p-12",role:"status","aria-live":"polite","aria-busy":"true","aria-label":"Loading favorites",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-muted/50"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Loading favorites..."}),(0,t.jsx)("span",{className:"sr-only",children:"Loading your saved biases..."})]}):0===j.length?(0,t.jsx)(m.p,{icon:o.A,title:"No favorites yet",description:"Start adding biases to your favorites to build your personal collection for quick reference",action:(0,t.jsx)(h(),{href:"/all",children:(0,t.jsx)(u.$,{className:"touch-target hover-lift button-press cursor-pointer transition-all duration-200",children:"Browse All Biases"})})}):(0,t.jsx)("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2",children:j.map((e,a)=>(0,t.jsx)(h(),{href:"/bias/".concat(e.id),className:"group cursor-pointer",style:{animationDelay:"".concat(Math.min(.05*a,.3),"s")},children:(0,t.jsx)("div",{className:"animate-fade-in-up transition-transform duration-200 group-hover:scale-[1.02]",children:(0,t.jsx)(c.F,{bias:e,variant:"compact",isFavorite:!0,onToggleFavorite:()=>w(e.id),isMastered:F[e.id],onToggleMastered:()=>E(e.id)})})},e.id))})]})}),(0,t.jsx)(g.A,{})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[209,223,358],()=>a(2800)),_N_E=e.O()}]);