(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{3098:(e,t,s)=>{Promise.resolve().then(s.bind(s,61375))},61375:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var a=s(74459),l=s(25803),r=s(47159),n=s(72953),i=s(61233),o=s(80992),d=s(5182),c=s(97479),m=s(11334),u=s(10564),h=s(20316),f=s(24135),p=s(61417),g=s(6500),x=s(11868);let b=(0,g.default)(()=>Promise.all([s.e(209),s.e(223)]).then(s.bind(s,20245)).then(e=>({default:e.RecommendationCard})),{loadableGenerated:{webpack:()=>[20245]},loading:()=>(0,a.jsx)(x.fG,{}),ssr:!0});var v=s(74682),N=s(40233),j=s(32332),y=s(32096),w=s(17584),A=s(63445),C=s(55281),P=s(72527),k=s(94335);let S=w.bL,E=w.l9;w.YJ,w.ZL,w.Pb,w.z6,l.forwardRef((e,t)=>{let{className:s,inset:l,children:r,...n}=e;return(0,a.jsxs)(w.ZP,{ref:t,className:(0,k.cn)("focus:bg-accent data-[state=open]:bg-accent flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none",l&&"pl-8",s),...n,children:[r,(0,a.jsx)(A.A,{className:"ml-auto h-4 w-4"})]})}).displayName=w.ZP.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(w.G5,{ref:t,className:(0,k.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-lg",s),...l})}).displayName=w.G5.displayName;let L=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...r}=e;return(0,a.jsx)(w.ZL,{children:(0,a.jsx)(w.UC,{ref:t,sideOffset:l,className:(0,k.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",s),...r})})});L.displayName=w.UC.displayName,l.forwardRef((e,t)=>{let{className:s,inset:l,...r}=e;return(0,a.jsx)(w.q7,{ref:t,className:(0,k.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm transition-colors outline-none select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",s),...r})}).displayName=w.q7.displayName;let M=l.forwardRef((e,t)=>{let{className:s,children:l,checked:r,...n}=e;return(0,a.jsxs)(w.H_,{ref:t,className:(0,k.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center rounded-sm py-1.5 pr-2 pl-8 text-sm transition-colors outline-none select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(w.VF,{children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})}),l]})});M.displayName=w.H_.displayName,l.forwardRef((e,t)=>{let{className:s,children:l,...r}=e;return(0,a.jsxs)(w.hN,{ref:t,className:(0,k.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center rounded-sm py-1.5 pr-2 pl-8 text-sm transition-colors outline-none select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(w.VF,{children:(0,a.jsx)(P.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=w.hN.displayName,l.forwardRef((e,t)=>{let{className:s,inset:l,...r}=e;return(0,a.jsx)(w.JU,{ref:t,className:(0,k.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",s),...r})}).displayName=w.JU.displayName,l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(w.wv,{ref:t,className:(0,k.cn)("bg-muted -mx-1 my-1 h-px",s),...l})}).displayName=w.wv.displayName;var R=s(69386),z=s.n(R),F=s(64105),_=s(72401);function T(e,t){let s=e.toLowerCase(),a=t.toLowerCase();if(s.includes(a))return 1;let l=a.split(/\s+/).filter(e=>e.length>2);if(0===l.length)return 0;let r=0,n=0;for(let e of l){if(s.includes(e)){r+=.8,n++;continue}let t=s.split(/\s+/),a=0;for(let s of t){if(s.length<3)continue;let t=function(e,t){let s=e.toLowerCase(),a=t.toLowerCase();if(s===a)return 1;if(s.includes(a)||a.includes(s))return .8;let l=[];for(let e=0;e<=a.length;e++)l[e]=[e];for(let e=0;e<=s.length;e++)l[0][e]=e;for(let e=1;e<=a.length;e++)for(let t=1;t<=s.length;t++)a.charAt(e-1)===s.charAt(t-1)?l[e][t]=l[e-1][t-1]:l[e][t]=Math.min(l[e-1][t-1]+1,l[e][t-1]+1,l[e-1][t]+1);return 1-l[a.length][s.length]/Math.max(s.length,a.length)}(s,e);t>a&&(a=t)}a>.7&&(r+=a,n++)}return n>0?r/l.length:0}var O=s(66092),G=s(96481);let I=["decision","memory","social","perception","misc"];function U(){let{allBiases:e,biasesLoading:t,favorites:s,toggleFavorite:g,isFavorite:x,settings:w,toggleMastered:A,isMastered:C,progressList:P,progressLoading:k}=(0,N.n)(),[R,U]=(0,l.useState)(""),Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,[s,a]=(0,l.useState)(e);return(0,l.useEffect)(()=>{let s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),s}(R,300),[q,B]=(0,l.useState)([]),[H,J]=(0,l.useState)({}),[$,V]=(0,l.useState)({});(0,l.useEffect)(()=>{let t=async()=>{m.v.log("[AllPage] Loading favorite and mastered states for",e.length,"biases");let t={},s={};try{await Promise.all(e.map(async e=>{t[e.id]=await x(e.id),s[e.id]=await C(e.id)})),J(t),V(s),m.v.log("[AllPage] Loaded states for",Object.keys(t).length,"biases")}catch(e){m.v.error("[AllPage] Error loading states:",e)}};e.length>0&&t()},[e,s]);let D=(0,l.useMemo)(()=>k||0===e.length?null:(0,O.cN)(e,P),[e,P,k]),Q=(0,l.useMemo)(()=>{m.v.log("[AllPage] Calculating search results"),m.v.log("[AllPage] Query:",Z),m.v.log("[AllPage] Selected categories:",q),m.v.log("[AllPage] Available biases:",e.length);let t=(0,_.vv)(Z);m.v.log("[AllPage] Sanitized query:",t);let s=function(e,t){if(!t||0===t.trim().length)return e.map(e=>({bias:e,score:1,matchedFields:[]}));let s=[];for(let a of e){let e=[],l=0,r=T(a.title,t);r>0&&(l+=3*r,e.push("title"));let n=T(a.summary,t);n>0&&(l+=2*n,e.push("summary"));let i=T(a.why,t);i>0&&(l+=1.5*i,e.push("why"));let o=T(a.counter,t);if(o>0&&(l+=1.5*o,e.push("counter")),e.length>0){let t=l/8;s.push({bias:a,score:t,matchedFields:e})}}return s.sort((e,t)=>t.score-e.score)}(e,t);m.v.log("[AllPage] Search results before category filter:",s.length);let a=s.filter(e=>0===q.length||q.includes(e.bias.category));return m.v.log("[AllPage] Final filtered results:",a.length),a},[e,Z,q]),Y=(0,l.useCallback)(e=>{B(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),K=(0,l.useCallback)(async e=>{await g(e),J(t=>({...t,[e]:!t[e]}))},[g]),W=(0,l.useCallback)(async e=>{let t=await A(e);V(s=>({...s,[e]:t}))},[A]),X=R.trim().length>0,ee=X?Q.reduce((e,t)=>e+t.score,0)/Math.max(Q.length,1):1,{visibleItems:et,hasMore:es,loadMoreRef:ea}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,[a,r]=(0,l.useState)(t),n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let t=new IntersectionObserver(t=>{t[0].isIntersecting&&a<e.length&&r(t=>Math.min(t+s,e.length))},{rootMargin:"200px"}),l=n.current;return l&&t.observe(l),()=>{l&&t.unobserve(l)}},[a,e.length,s]),{visibleItems:e.slice(0,a),hasMore:a<e.length,loadMoreRef:n,visibleCount:a}}(Q,20,10);return(0,a.jsxs)("div",{className:"min-h-screen pb-20 sm:pb-24",children:[(0,a.jsx)(h.i,{style:w.backgroundStyle,seed:42}),(0,a.jsx)(u.P,{}),(0,a.jsx)("main",{id:"main-content",className:"mx-auto w-full max-w-4xl px-3 py-4 sm:px-4 sm:py-6 md:py-8",children:(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"mb-1 font-serif text-2xl font-bold sm:mb-2 sm:text-3xl",children:"All Biases"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-sm sm:text-base",children:["Browse all ",e.length," cognitive biases from the collection"]})]}),!X&&D&&(0,a.jsx)(b,{bias:D,reason:"Continue your learning journey"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(r.A,{className:"text-muted-foreground pointer-events-none absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2","aria-hidden":"true"}),(0,a.jsx)(j.p,{type:"search",placeholder:"Search titles, descriptions...",value:R,onChange:e=>U(e.target.value),className:"glass border-border/50 pr-9 pl-9 text-sm sm:text-base",maxLength:200,"aria-label":"Search biases"}),R&&(0,a.jsx)(y.$,{variant:"ghost",size:"icon",className:"absolute top-1/2 right-1 h-7 w-7 -translate-y-1/2 cursor-pointer",onClick:()=>U(""),"aria-label":"Clear search",children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(S,{children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(y.$,{variant:"outline",className:"glass border-border/50 w-full cursor-pointer bg-transparent text-sm sm:w-auto sm:text-base",children:[(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4"}),"Filter",q.length>0&&" (".concat(q.length,")")]})}),(0,a.jsx)(L,{align:"end",className:"w-48",children:I.map(e=>(0,a.jsx)(M,{checked:q.includes(e),onCheckedChange:()=>Y(e),children:(0,a.jsx)("span",{className:"capitalize",children:e})},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 text-xs sm:text-sm",children:[(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Showing ",Q.length," of ",e.length]}),X&&ee>.7&&(0,a.jsxs)(G.E,{variant:"secondary",className:"gap-1 text-xs",children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"xs:inline hidden",children:"High relevance"}),(0,a.jsx)("span",{className:"xs:hidden",children:"Relevant"})]})]}),t?(0,a.jsx)("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2",role:"status","aria-live":"polite","aria-busy":"true","aria-label":"Loading biases",children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"glass space-y-3 rounded-xl p-4 sm:rounded-2xl sm:p-6",children:[(0,a.jsx)(F.E,{className:"h-5 w-16 sm:h-6 sm:w-20"}),(0,a.jsx)(F.E,{className:"h-6 w-full sm:h-8"}),(0,a.jsx)(F.E,{className:"h-12 w-full sm:h-16"})]},t))}):0===Q.length?(0,a.jsx)(v.p,{icon:d.A,title:"No results found",description:X?'No biases match "'.concat(R,'". Try adjusting your search terms or filters.'):"No biases match your current filters. Try selecting different categories.",action:(X||q.length>0)&&(0,a.jsx)(y.$,{onClick:()=>{U(""),B([])},variant:"outline",className:"cursor-pointer",children:"Clear Filters"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2",children:et.map((e,t)=>{let{bias:s,score:l}=e;return(0,a.jsx)(z(),{href:"/bias/".concat(s.id),className:"group cursor-pointer",style:{animationDelay:"".concat(Math.min(.05*t,.3),"s")},children:(0,a.jsxs)("div",{className:"relative transition-transform duration-200 group-hover:scale-[1.02]",children:[(0,a.jsx)(f.F,{bias:s,variant:"compact",isFavorite:H[s.id],onToggleFavorite:()=>K(s.id),isMastered:$[s.id],onToggleMastered:()=>W(s.id)}),X&&l>.8&&(0,a.jsx)("div",{className:"animate-fade-in pointer-events-none absolute top-2 right-2",children:(0,a.jsx)(G.E,{variant:"secondary",className:"text-xs shadow-sm",children:"Best match"})})]})},s.id)})}),es&&(0,a.jsx)("div",{ref:ea,className:"flex items-center justify-center py-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)("span",{className:"text-sm",children:"Loading more biases..."})]})})]})]})}),(0,a.jsx)(p.A,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[209,223,358],()=>t(3098)),_N_E=e.O()}]);